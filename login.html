<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Master Key | Login</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <script src="js/auth0-variables.js"></script> 
  </head>

  <body>
  <script src="https://cdn.auth0.com/js/lock/10.14/lock.min.js"></script>
   <br>
   <br>
   <p>hola</p>
    <div id="masterk-log">
      <script>
        var options = {
        theme: {
          logo: 'css/logo-c.svg',
          primaryColor: '#31324F'
        },

        auth: {
          redirectUrl: 'http://localhost:3000/login',
          sso: false
        },

        languageDictionary: {
          title: 'Master-Key'
        },

        //container: 'masterk-log',
        language: 'es',
        allowedConnections: ['github', 'facebook', 'google-oauth2'],
        rememberLastLogin: false,
        scope: 'openid profile' 
      };
      
      var lock = new Auth0Lock(AUTH0_CLIENT_ID, AUTH0_DOMAIN, options);
      lock.show();

      </script>

    <!-- <script>
      $ = document.querySelector.bind(document);

      var options = {
        theme: {
          logo: 'http://localhost:3000/logo',
          primaryColor: '#31324F'
        },

        auth: {
          redirect: false,
          autoclose: true,
          sso: false
        },

        languageDictionary: {
          title: 'Master-Key'
        },

        language: 'es',
        allowedConnections: ['github', 'facebook', 'google-oauth2'],
        rememberLastLogin: false,
        scope: 'openid profile' 
      };
      
      var lock = new Auth0Lock(AUTH0_CLIENT_ID, AUTH0_DOMAIN, options);
      
      var token = localStorage.getItem('accessToken');
        if (token) {
          showLoggedIn();
        }
      
      var idToken = localStorage.getItem('id_token') || null;
      var profile = JSON.parse(localStorage.getItem('profile')) || null;
      if (idToken && profile) {
        $('.avatar').src = profile.picture;
        $('.name').textContent = profile.nickname;
        $('.email').textContent = profile.email;
        $('.profile-section').classList.remove('hidden');
        $('.btn-login').classList.add('hidden');
        $('.btn-logout').classList.remove('hidden');
      } else {
        $('.profile-section').classList.add('hidden');
        $('.btn-login').classList.remove('hidden');
        $('.btn-logout').classList.add('hidden');
      }
      $('.btn-login').addEventListener('click', function() {
        lock.show();

      });

      lock.on('authenticated', (authResult) => {
        localStorage.setItem('id_token', authResult.idToken);
        lock.getProfile(authResult.idToken, (err, profile) => {
          localStorage.setItem('profile', JSON.stringify(profile));
          $('.profile-section').classList.remove('hidden');
          $('.avatar').src = profile.picture;
          $('.name').textContent = profile.nickname;
          $('.email').textContent = profile.email;
          $('.btn-login').classList.add('hidden');
          $('.btn-logout').classList.remove('hidden');
        });
        lock.hide();
      });

      lock.on('authorization_error', function(error) {
        lock.show({
          flashMessage: {
            type: 'error',
            text: error.error_description
          }
        });
      });
      
      $('.btn-logout').addEventListener('click', function() {
        localStorage.removeItem('profile');
        localStorage.removeItem('id_token');
        $('.profile-section').classList.add('hidden');
        $('.avatar').src = '';
        $('.name').textContent = null;
        $('.email').textContent = null;
        $('.btn-login').classList.remove('hidden');
        $('.btn-logout').classList.add('hidden');
      });
    </script>-->
    </div>

    <div id="topBar">
        <a href ="#" id="load_concentrado"> HOME </a>
    </div>
    <div id ="content">        
    </div>

    <script>
    $(document).ready( function() {
        $("#load_home").on("click", function() {
            $("#content").load("content.html");
        });
    });
    </script>
  </body>
</html>
